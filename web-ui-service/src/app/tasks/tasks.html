<style>
    .my-drop-zone { border: dotted 3px lightgray; }
    .nv-file-over { border: dotted 3px red; } /* Default class applied to drop zones on over */
    .another-file-over-class { border: dotted 3px green; }
 
    html, body { height: 100%; }
</style>

<div id="wrapper">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Transport Video Search System</a>
        </div>
        <!-- /.navbar-header -->

        <ul class="nav navbar-top-links navbar-right">
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-tasks">
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    You don't have any tasks running
                                </p>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="/tasks">
                            <strong>See All Tasks</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-tasks -->
            </li>

            <!-- /.dropdown -->
            <li class="dropdown">
                <a (click)="setDefaultBellColor()" [style.color]='bellColor' class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                
                <!-- No alerts -->
                <ul *ngIf="!alertsList || alertsList.length == 0" class="dropdown-menu dropdown-alerts">
                    <li>
                        <a href="/alerts">
                            <div>
                                You don't have any alerts
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="/alerts">
                            <strong>See All Alerts</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>

                <!-- Alerts exist  -->
                <ul *ngIf="alertsList && alertsList.length > 0" class="dropdown-menu dropdown-alerts">
                        <ng-container *ngFor="let alert of alertsList">
                            <li>
                                <a href="/alerts">
                                    <div>
                                        <i class="fa fa-twitter fa-fw"></i> {{alert.message}}
                                        <span class="pull-right text-muted small">{{alert.time | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                        </ng-container>

                        <li>
                            <a class="text-center" href="/alerts">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>


                <!-- /.dropdown-alerts -->
            </li>

            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="/profile"><i class="fa fa-user fa-fw"></i> User Profile</a>
                    </li>
                    <li><a href="/settings"><i class="fa fa-gear fa-fw"></i> Settings</a>
                    </li>
                    <li class="divider"></li>
                    <li><a (click)="logout()" ><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                    </li>
                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
        <!-- /.navbar-top-links -->

        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-menu">
                    
                    <li>
                        <a href="/profile"><i class="fa fa-user fa-fw"></i> Profile</a>
                    </li>
                    <li class="active">
                        <a href="/tasks"><i class="fa fa-tasks fa-fw"></i> Tasks</a>
                    </li>
                    <li>
                        <a href="/alerts"><i class="fa fa-bell fa-fw"></i> Alerts</a>
                    </li>
                    <li>
                        <a href="/settings"><i class="fa fa-gear fa-fw"></i> Settings</a>
                    </li>
                </ul>
            </div>
            <!-- /.sidebar-collapse -->
        </div>
        <!-- /.navbar-static-side -->
    </nav>

    <!-- Page Content -->
    <div id="page-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Tasks</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">

                    <!-- New Task Panel-->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Create new task
                        </div>
                        <div class="panel-body" style="position: relative;" >
                            
<!--                             <div class="container">
 --> 
                                <h3>Choose image or video files to create a new task</h3>
                             
<!--                                  <div class="row">
 -->
                                    <div class="col-md-3" style="bottom: 0px;padding-bottom: 118px; padding-top: 100px; height: 100%; position: absolute;" >
                                        
                                        <div style="height: 100%; display: flex; align-items: center;" ng2FileDrop
                                             [ngClass]="{'nv-file-over': hasBaseDropZoneOver}"
                                             (fileOver)="fileOverBase($event)"
                                             [uploader]="uploader"
                                             class="well my-drop-zone">
                                            <div>You can drop files here</div>
                                        </div>

                                        <div>
                                            Choose files
                                            <input type="file" ng2FileSelect [uploader]="uploader" multiple  />
                                        </div>

                                    </div>

                                    
                             
                                    <div class="col-md-9" style="margin-bottom: 40px; float: right;">
                             
                                        <h3>Upload queue</h3>
                                        <p>Queue length: {{ uploader?.queue?.length }}</p>
                             
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th width="50%">Name</th>
                                                <th>Size</th>
                                                <th>Progress</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let item of uploader.queue">
                                                <td><strong>{{ item?.file?.name }}</strong></td>
                                                <td *ngIf="uploader.options.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                                                <td *ngIf="uploader.options.isHTML5">
                                                    <div class="progress" style="margin-bottom: 0;">
                                                        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
                                                    </div>
                                                </td>
                                                <td class="text-center">
                                                    <span *ngIf="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                                    <span *ngIf="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                                    <span *ngIf="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                                </td>
                                                <td nowrap>
                                                    <button type="button" class="btn btn-danger btn-xs"
                                                            (click)="item.remove()">
                                                        <span class="glyphicon glyphicon-trash"></span> Remove
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                             
                                        <div>
                                            <div>
                                                Queue progress:
                                                <div class="progress" style="">
                                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-success btn-s"
                                                    (click)="createTask()" [disabled]="!uploader.getNotUploadedItems().length">
                                                <span class="glyphicon glyphicon-upload"></span> Create
                                            </button>
                                            <button type="button" class="btn btn-danger btn-s"
                                                    (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length">
                                                <span class="glyphicon glyphicon-trash"></span> Remove all
                                            </button>
                                        </div>
                             
                                    </div>
                             
                                <!-- </div> -->
                             
                            <!-- </div>  -->
                        </div>
                    </div>
                    <!--End Of New Task Panel-->

                    <!--Your Tasks Panel-->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Your Tasks
                        </div>
                        <div class="panel-body">
                            <table class="table">
                                <tr>
                                    <th>#</th>
                                    <th>Created</th>
                                    <th>Size</th> 
                                    <th>Progress</th>
                                    <th>Status</th>
                                    <th></th>
                                </tr>
                                <tr *ngFor="let task of tasks | paginate: {itemsPerPage: 5, currentPage:page, id: '1'}; let i = index">
                                    <td>{{i + 1}}</td>
                                    <td>{{task.date}}</td>
                                    <td>{{task.approximate_size}}</td>
                                    <td>
                                        <div class='progress' style='margin-bottom: 0;'>
                                            <div class='progress-bar' [style.width]='task.progress'></div>
                                        </div>  

                                    </td>
                                    <td class='text-center'>
                                        <span *ngIf='task.done'><i class='glyphicon glyphicon-ok'></i></span>
                                        <span *ngIf='!task.done && !task.processing'><i class='glyphicon glyphicon-remove'></i></span>

                                    </td>
                                    <td>
                                        <a class='btn btn-success btn-s' href='tasks/{{task.id}}'>
                                                <span class='glyphicon glyphicon-upload'></span> Details
                                        </a>

                                    </td>
                                </tr>
                            </table>
                            <pagination-controls (pageChange)="page = $event" id="1"
                                  maxSize="5"
                                  directionLinks="true"
                                  autoHide="true">
                            </pagination-controls>

                        </div>
                    </div>
                    <!--End Of Your Tasks Panel-->

                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container-fluid -->
    </div>
    <!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->